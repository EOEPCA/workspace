
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://eoepca.readthedocs.io/projects/workspace/design/architecture/">
      
      
        <link rel="prev" href="../../getting-started/user-view/">
      
      
        <link rel="next" href="../iam-integration/">
      
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Architecture - EOEPCA Workspace Building Block</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/eoepca.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="EOEPCA Workspace Building Block" class="md-header__button md-logo" aria-label="EOEPCA Workspace Building Block" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EOEPCA Workspace Building Block
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Architecture
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/EOEPCA/workspace/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="https://eoepca.readthedocs.io/" class="md-tabs__link">
        
  
    
  
  EOEPCA Documentation

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../.." class="md-tabs__link">
          
  
  Workspace

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="EOEPCA Workspace Building Block" class="md-nav__button md-logo" aria-label="EOEPCA Workspace Building Block" data-md-component="logo">
      
  <img src="../../img/favicon.ico" alt="logo">

    </a>
    EOEPCA Workspace Building Block
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/EOEPCA/workspace/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://eoepca.readthedocs.io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EOEPCA Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Workspace
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Workspace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/operator-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operator View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/user-view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User View
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Design
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Design
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Architectural Composition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crossplane-as-the-control-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Crossplane as the Control Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-and-storage-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime and Storage Integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iam-and-policy-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      IAM and Policy Enforcement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declarative-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Declarative Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-for-switch-from-v1-to-v2" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation for Switch from v1 to v2
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../iam-integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IAM Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../operational-controls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational Controls
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API References
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            API References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://workspace-api.develop.eoepca.org/docs" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workspace API ↗
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://provider-storage.versioneer.at/latest/reference-guides/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Storage CRD ↗
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://provider-datalab.versioneer.at/latest/reference-guides/api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datalab CRD ↗
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#architectural-composition" class="md-nav__link">
    <span class="md-ellipsis">
      Architectural Composition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crossplane-as-the-control-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Crossplane as the Control Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtime-and-storage-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime and Storage Integration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iam-and-policy-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      IAM and Policy Enforcement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declarative-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Declarative Workflow
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-for-switch-from-v1-to-v2" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation for Switch from v1 to v2
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/EOEPCA/workspace/edit/main/docs/design/architecture.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="architecture">Architecture<a class="headerlink" href="#architecture" title="Permanent link">⚓︎</a></h1>
<p>The Workspace Building Block (BB) provides a cohesive and modular environment that unifies <strong>compute</strong>, <strong>storage</strong>, and <strong>tooling</strong> into a single declaratively managed system. Its architecture is Kubernetes-native, built upon <a href="https://crossplane.io">Crossplane</a>, which serves as the foundation for modeling and orchestrating complex service dependencies using Custom Resource Definitions (CRDs) and Compositions.  </p>
<h2 id="architectural-composition">Architectural Composition<a class="headerlink" href="#architectural-composition" title="Permanent link">⚓︎</a></h2>
<p>At its core, the Workspace BB is composed of three tightly integrated subsystems:</p>
<p><strong>Storage Management</strong> — implemented through the <a href="https://provider-storage.versioneer.at">provider-storage</a> abstraction, which provisions and manages object storage across multiple backends such as MinIO, AWS S3, and OTC OBS.  </p>
<ul>
<li>Buckets are represented as Kubernetes CRs (<code>Storage</code> objects).  </li>
<li>The reconciliation process automatically provisions S3 buckets, configures access policies (e.g. read-write grants), and returns endpoint and credential data to dependent components such as datalabs or applications.  </li>
<li>Credentials are securely propagated into runtime environments via Kubernetes secrets or environment variables.  </li>
<li>The system supports both local and external S3-compatible endpoints, enabling hybrid storage configurations.</li>
</ul>
<p><strong>Runtime Management</strong> — handled by the <a href="https://provider-datalab.versioneer.at">provider-datalab</a>, which builds on the <a href="https://educates.dev">educates.dev</a> project to create isolated compute environments either as Kubernetes namespaces or as <a href="https://www.vcluster.com/">vClusters</a> for enhanced multi-tenancy and isolation.  </p>
<ul>
<li>Each datalab hosts one or more user-facing applications such as VSCode Server or web-based terminal and browser interfaces.  </li>
<li>Datalabs automatically connect to workspace-specific storage, mounting buckets via <a href="https://github.com/versioneer-tech/csi-rclone">CSI Rclone</a> into the file system and preloading common command-line tools (<code>awscli</code>, <code>rclone</code>, <code>boto3</code>).  </li>
<li>This design ensures immediate, persistent, and secure access to datasets — supporting both exploratory workflows and automated pipelines.  </li>
<li>Users can extend Datalabs by deploying additional Kubernetes-native services such as databases, dashboards, or custom data processors.</li>
</ul>
<p><strong>Orchestration &amp; Interaction Layer</strong> — composed of the <a href="https://github.com/EOEPCA/rm-workspace-api">workspace-api</a> and the Workspace UI, which form the primary entry point for users and operators.  </p>
<ul>
<li>The API provides a unified REST interface that translates user actions (e.g., creating a workspace, adding buckets, or launching Datalabs) into declarative CRDs managed by <a href="https://crossplane.io">Crossplane</a>.  </li>
<li>The UI presents these capabilities graphically, enabling users to create and manage storage, grant or revoke bucket access, and invite collaborators.  </li>
<li>Authentication and authorization are delegated to Keycloak, ensuring that each workspace inherits consistent identity, role, and group configurations across all integrated services.</li>
</ul>
<h2 id="crossplane-as-the-control-plane">Crossplane as the Control Plane<a class="headerlink" href="#crossplane-as-the-control-plane" title="Permanent link">⚓︎</a></h2>
<p>All orchestration logic is implemented declaratively through <a href="https://crossplane.io">Crossplane</a> Compositions. Each high-level abstraction — such as Workspace, Storage, or Datalab — is modeled as a Composite Resource (XR) that maps to one or more Managed Resources (MR).</p>
<p>This layered model allows infrastructure and application services to be managed through the same GitOps workflow as any Kubernetes manifest:</p>
<ul>
<li>Providers such as <a href="https://marketplace.upbound.io/providers/crossplane-contrib/provider-kubernetes">provider-kubernetes</a>, <a href="https://marketplace.upbound.io/providers/crossplane-contrib/provider-helm">provider-helm</a>, <a href="https://marketplace.upbound.io/providers/crossplane-contrib/provider-minio">provider-minio</a>, and <a href="https://marketplace.upbound.io/providers/crossplane-contrib/provider-keycloak">provider-keycloak</a> expose declarative APIs for managing external systems.  </li>
<li>Compositions define how these providers interact to realize higher-level abstractions (e.g., create a bucket, generate credentials, store them as a secret, and inject them into a datalab).  </li>
<li>EnvironmentConfigs define cluster-wide parameters such as ingress domains, TLS secrets, S3 endpoints, and Keycloak realms, ensuring that all Compositions operate within a consistent configuration context.</li>
</ul>
<p>Each workspace is therefore not a fixed allocation but a composable graph of managed resources — continuously synchronized through Crossplane’s reconciliation loop to ensure desired state alignment.</p>
<h2 id="runtime-and-storage-integration">Runtime and Storage Integration<a class="headerlink" href="#runtime-and-storage-integration" title="Permanent link">⚓︎</a></h2>
<p>A key design goal of the Workspace BB is data proximity and transparent access. Every datalab automatically receives credentials for the storage resources within its workspace scope. Using CSI Rclone, these buckets are mounted as file systems inside the containerized environment, providing familiar navigation and manipulation of data.  </p>
<p>The integrated file browser in the Datalab UI allows:</p>
<ul>
<li>Hierarchical navigation of storage buckets  </li>
<li>Preview of text, imagery, and EO product assets  </li>
<li>Instant data sharing via presigned URLs  </li>
</ul>
<p>By exposing data through both object APIs and filesystem mounts, users can fluidly transition between interactive analysis, batch computation, and automated packaging workflows — without reconfiguring credentials or access paths.</p>
<h2 id="iam-and-policy-enforcement">IAM and Policy Enforcement<a class="headerlink" href="#iam-and-policy-enforcement" title="Permanent link">⚓︎</a></h2>
<p>Identity and Access Management (IAM) is centralized through Keycloak, ensuring consistent user identity and access policies across the entire platform. Crossplane’s <a href="https://marketplace.upbound.io/providers/crossplane-contrib/provider-keycloak">provider-keycloak</a> enables the declarative management of users, groups, clients, and roles — functionality dynamically leveraged by the <a href="https://provider-datalab.versioneer.at">provider-datalab</a> compositions to associate these entities with specific workspaces and runtime environments.  </p>
<p>This approach ensures that collaboration is securely limited to authorized users within designated workspaces, maintaining both security and compliance across all deployments.<br />
It also lays the groundwork for future extensions, enabling more granular role-based access control across services and datasets.</p>
<h2 id="declarative-workflow">Declarative Workflow<a class="headerlink" href="#declarative-workflow" title="Permanent link">⚓︎</a></h2>
<p>The entire system operates on declarative state entities managed through <a href="https://crossplane.io">Crossplane</a> compositions. All resources exist natively within Kubernetes and are continuously reconciled, ensuring complete traceability, consistency, and reproducibility across all components.  </p>
<p>Storage, runtime, and IAM elements are defined as Kubernetes manifests and can be orchestrated either by the <a href="https://github.com/EOEPCA/rm-workspace-api">workspace-api</a> or deployed manually — for instance via direct API calls or GitOps tools such as Flux or ArgoCD.<br />
This approach provides full flexibility in how the platform is operated, including hybrid modes where certain entities are managed declaratively through GitOps while others are created dynamically via API interactions.<br />
This model is particularly advantageous for static or example setups, which can be easily bootstrapped and maintained using the same declarative principles.</p>
<h2 id="motivation-for-switch-from-v1-to-v2">Motivation for Switch from v1 to v2<a class="headerlink" href="#motivation-for-switch-from-v1-to-v2" title="Permanent link">⚓︎</a></h2>
<p>The initial <strong>v1</strong> implementation of the Workspace introduced a functional but rigid design that limited operator flexibility, scalability, and usability in collaborative contexts.  </p>
<ul>
<li>Each workspace included exactly one bucket and a fixed set of services, preventing customization for specific projects or workloads.  </li>
<li>A workspace was implicitly tied to a single user through a naming convention — a team concept did not exist.  </li>
<li>Service deployment relied on imperative API calls, making upgrades, versioning, and selective redeployment difficult to automate.  </li>
<li>Infrastructure provisioning (e.g., buckets, IAM policies) required operator-specific logic and custom webhook extensions.  </li>
<li>Multi-tenancy was limited to namespace isolation, which complicated CRD versioning, RBAC scoping, and cluster-wide policy management.  </li>
</ul>
<p>The <strong>v2</strong> model resolves these limitations through a declarative workflow based on composable pipelines and continuous reconciliation.  It introduces flexible team membership, optional <a href="https://www.vcluster.com/">vCluster</a> integration for enhanced multi-tenancy, and a unified GitOps-compatible model — allowing operators and users alike to declaratively define and evolve workspaces, services, and access policies with full transparency and control.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../getting-started/user-view/" class="md-footer__link md-footer__link--prev" aria-label="Previous: User View">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                User View
              </div>
            </div>
          </a>
        
        
          
          <a href="../iam-integration/" class="md-footer__link md-footer__link--next" aria-label="Next: IAM Integration">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                IAM Integration
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.footer", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.top", "content.code.copy", "content.action.edit", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>